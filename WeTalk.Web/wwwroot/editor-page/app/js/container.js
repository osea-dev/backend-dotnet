(()=>{"use strict";var e={48845:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var o=a(64427),i=a(11247),l={};for(const c in i)"default"!==c&&(l[c]=()=>i[c]);a.d(t,l);var n=a(18938),r=a(1001);function s(e){this["$style"]=n.Z.locals||n.Z}var d=(0,r.Z)(i["default"],o.s,o.x,!1,s,null,null);const u=d.exports},90162:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var o=a(22541),i=a(68723),l={};for(const c in i)"default"!==c&&(l[c]=()=>i[c]);a.d(t,l);var n=a(26765),r=a(1001);function s(e){this["$style"]=n.Z.locals||n.Z}var d=(0,r.Z)(i["default"],o.s,o.x,!1,s,null,null);const u=d.exports},75851:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var o=a(72341),i=a(50554),l={};for(const c in i)"default"!==c&&(l[c]=()=>i[c]);a.d(t,l);var n=a(44600),r=a(1001);function s(e){this["$style"]=n.Z.locals||n.Z}var d=(0,r.Z)(i["default"],o.s,o.x,!1,s,null,null);const u=d.exports},63414:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var o=a(88676),i=a(12185),l={};for(const c in i)"default"!==c&&(l[c]=()=>i[c]);a.d(t,l);var n=a(56908),r=a(1001);function s(e){this["$style"]=n.Z.locals||n.Z}var d=(0,r.Z)(i["default"],o.s,o.x,!1,s,null,null);const u=d.exports},11939:(e,t,a)=>{a.r(t),a.d(t,{__esModule:()=>l.X,default:()=>c});var o=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{class:e.$style["code_layer"]},[t("c-input",{attrs:{type:"textarea",rows:10,placeholder:"请输入复制的板块代码",resize:"none"},model:{value:a.userCode,callback:function(e){a.userCode=e},expression:"userCode"}}),t("div",{class:e.$style["attr_set_group"]},[t("div",{class:[e.$style["user_editor_confirm"],{ready:a.userCode.length}],on:{click:a.userCodeConfirm}},[e._v(" "+e._s(a.userCode.length?"确认添加":"添加复制的代码")+" ")])])],1)},i=[],l=a(85354);const n=l.Z,r={code_layer:"CodeLayer_code_layer_x7ckG",user_editor_confirm:"CodeLayer_user_editor_confirm_i1Y0W",attr_set_group:"CodeLayer_attr_set_group_olrPW"};var s=a(1001);function d(e){this["$style"]=r.locals||r}var u=(0,s.Z)(n,o,i,!1,d,null,null);const c=u.exports},30459:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var o=a(88895),i=a(12136),l={};for(const c in i)"default"!==c&&(l[c]=()=>i[c]);a.d(t,l);var n=a(17905),r=a(1001);function s(e){this["$style"]=n.Z.locals||n.Z}var d=(0,r.Z)(i["default"],o.s,o.x,!1,s,null,null);const u=d.exports},69123:(e,t,a)=>{a.r(t),a.d(t,{__esModule:()=>l.X,default:()=>c});var o=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{class:e.$style["fun_layer"]},[t("div",{staticClass:"page_editor-layout_options layout_grid layout_grid-col-2 layout_grid-rowspac-10 layout_grid-colspac-15"},[t("div",{staticClass:"layout_grid layout_grid-col-1",class:e.$style["item"],attrs:{"data-value":"slider"},on:{click:function(e){return a.addHandleModule("slider")}}},[t("div",{class:e.$style["item_son"]},[t("div",{staticClass:"des"},[e._v("幻灯")])])]),t("div",{staticClass:"layout_grid layout_grid-col-1",class:e.$style["item"],attrs:{"data-value":"block"},on:{click:function(e){return a.addHandleModule("form")}}},[t("div",{class:e.$style["item_son"]},[t("div",{staticClass:"des"},[e._v("表单")])])]),t("div",{staticClass:"layout_grid layout_grid-col-1",class:e.$style["item"],attrs:{"data-value":"block"},on:{click:function(e){return a.addHandleModule("block")}}},[t("div",{class:e.$style["item_son"]},[t("div",{staticClass:"des"},[e._v("分割线")])])])])])},i=[],l=a(21864);const n=l.Z,r={fun_layer:"FunLayer_fun_layer_wiWYJ",item:"FunLayer_item_e7qIR",active:"FunLayer_active_huRRb",item_son:"FunLayer_item_son_ZbQal"};var s=a(1001);function d(e){this["$style"]=r.locals||r}var u=(0,s.Z)(n,o,i,!1,d,null,null);const c=u.exports},82680:(e,t,a)=>{a.r(t),a.d(t,{__esModule:()=>l.X,default:()=>c});var o=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{class:e.$style["template_layer"]},[t("div",{ref:"scrollBox",class:e.$style["list-module_type"]},[e._l(a.moduleCategory,(function(o,i){return[t("div",{key:i,class:[e.$style["item-module_type"],{select:a.selectCategory===o.value}],on:{click:function(e){return a.itemClick(o.value)}}},[t("span",{staticClass:"text"},[e._v(e._s(o.lable))])])]}))],2),t("div",{class:e.$style["list-module"]},[t("div",{class:e.$style["style-btns"]},e._l(a.thumbOption,(function(o){return t("div",{key:o.value,class:e.$style["style-btn"],attrs:{"data-type":o.value||"all","data-active":a.selectThumb==o.value,label:o.lable},on:{click:function(e){return a.changeStyle(o.value)}}})})),0),t("div",{class:e.$style["list-module--inner"]},[e._l(a.showModuleList,(function(o){return[t("div",{key:o.id,class:e.$style["list-module_item"]},[t("img",{attrs:{src:o.img}}),t("div",{class:e.$style["layer-cover"]},[t("div",{class:e.$style["btn"],on:{click:function(e){return a.addModule(o)}}},[e._v(" 使用组件 ")])])])]}))],2),t("div",{ref:"pageCounter",class:e.$style["page-counter"]},[a.moduleListUpdating?t("i",{staticClass:"ic iconfont icon-Loading"}):t("span",{staticClass:"text"},[e._v("--没有更多--")])])])])},i=[],l=a(57715);const n=l.Z,r={template_layer:"OnlineTemplateLayer_template_layer_Xm9R6","list-module_type":"OnlineTemplateLayer_list-module_type_D52v6",row:"OnlineTemplateLayer_row_h7vsA","item-module_type":"OnlineTemplateLayer_item-module_type_d0gmu","list-module":"OnlineTemplateLayer_list-module_sGCDJ","style-btns":"OnlineTemplateLayer_style-btns_YszYU","style-btn":"OnlineTemplateLayer_style-btn_YJOUJ","list-module--inner":"OnlineTemplateLayer_list-module--inner_fDE1N","list-module_item":"OnlineTemplateLayer_list-module_item_dLDD3","layer-cover":"OnlineTemplateLayer_layer-cover_XQigx",btn:"OnlineTemplateLayer_btn_wpVts","page-counter":"OnlineTemplateLayer_page-counter_qr622",rotate:"OnlineTemplateLayer_rotate_nZKrl"};var s=a(1001);function d(e){this["$style"]=r.locals||r}var u=(0,s.Z)(n,o,i,!1,d,null,null);const c=u.exports},89811:(e,t,a)=>{a.r(t),a.d(t,{__esModule:()=>l.X,default:()=>c});var o=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{class:e.$style["template_layer"]},[t("div",{ref:"scrollBox",class:e.$style["list-module_type"]},[e._l(a.showModuleList,(function(o,i){return[o.list&&o.list.length?t("div",{key:i,class:[e.$style["item-module_type"],{select:a.selectCategory===i}],on:{click:function(e){return a.itemClick(i)}}},[t("span",{staticClass:"text"},[e._v(e._s(o.name))])]):e._e()]}))],2),t("div",{class:e.$style["list-module"]},[e._l(a.selectModuleGroup,(function(o,i){return[a.moduleLib.showModulesType.includes(o.type)?t("div",{key:i,class:e.$style["list-module_item"]},[t("img",{attrs:{src:o.image,alt:""}}),t("div",{class:e.$style["layer-cover"],on:{click:function(e){return a.addModule(o)}}},[t("div",{class:e.$style["btn"]},[e._v("使用组件")])])]):e._e()]}))],2)])},i=[],l=a(86588);const n=l.Z,r={template_layer:"TemplateLayer_template_layer_k7x6L","list-module_type":"TemplateLayer_list-module_type_XlX5s",row:"TemplateLayer_row_huDBJ","item-module_type":"TemplateLayer_item-module_type_Emu0q","list-module":"TemplateLayer_list-module_RmCyI","style-btns":"TemplateLayer_style-btns_mvBA6","style-btn":"TemplateLayer_style-btn_HHv78","list-module--inner":"TemplateLayer_list-module--inner_QWqYB","list-module_item":"TemplateLayer_list-module_item_Nsluu","layer-cover":"TemplateLayer_layer-cover_iibac",btn:"TemplateLayer_btn_AU9uK","page-counter":"TemplateLayer_page-counter_m3RuA",rotate:"TemplateLayer_rotate_N5t6o"};var s=a(1001);function d(e){this["$style"]=r.locals||r}var u=(0,s.Z)(n,o,i,!1,d,null,null);const c=u.exports},3330:(e,t,a)=>{a.r(t),a.d(t,{__esModule:()=>l.X,default:()=>c});var o=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{class:e.$style["pop-panel"]},[t("div",{class:e.$style["panel-header"]},[t("div",{class:e.$style["panel-title"]},[t("span",{staticClass:"text"},[e._v(e._s(e.title))])]),t("div",{class:e.$style["btn--close"],on:{click:a.close}},[t("i",{staticClass:"ic pagefont page-close"})])]),t("div",{class:e.$style["panel-body"]},[t("div",{class:e.$style["panel-desc"],domProps:{innerHTML:e._s(e.desc)}}),e._t("body")],2),t("div",{class:e.$style["panel-footer"]},[e._l(e.buttons,(function(o,i){return[0!=i?t("div",{key:"divide"+i,class:e.$style["btn-divide"]}):e._e(),t("div",{key:i,class:[e.$style["footer-btn"],{[e.$style["state-color_"+o.theme]]:o.theme}],on:{click:function(e){return a.btnClick(i)}}},[t("span",{staticClass:"text"},[e._v(e._s(o.text))])])]}))],2)])},i=[],l=a(49653);const n=l.Z,r={"pop-panel":"PopPanel_pop-panel_iXSJo","panel-header":"PopPanel_panel-header_sc6sa","panel-title":"PopPanel_panel-title_oVOG7","btn--close":"PopPanel_btn--close_cstl1","panel-body":"PopPanel_panel-body_BGYW5","panel-footer":"PopPanel_panel-footer_jze55","footer-btn":"PopPanel_footer-btn_Gd0NA","state-color_yellow":"PopPanel_state-color_yellow_uByYW","state-color_green":"PopPanel_state-color_green_mhZjM","btn-divide":"PopPanel_btn-divide_aOOy2",pop_panel_gray_color:"PopPanel_pop_panel_gray_color_L4rBc"};var s=a(1001);function d(e){this["$style"]=r.locals||r}var u=(0,s.Z)(n,o,i,!1,d,null,null);const c=u.exports},18938:(e,t,a)=>{a.d(t,{Z:()=>o});const o={"app-container":"App_app-container_N5sQ7",editor_iframe:"App_editor_iframe__1XAh","frame-loading":"App_frame-loading_G5Tyl","frame-mask":"App_frame-mask_ZEdae","app-body":"App_app-body_q8zC6","editor_iframe-cover":"App_editor_iframe-cover_HPCCm","editor_iframe-editor_btn":"App_editor_iframe-editor_btn_EFOrg","app-playground":"App_app-playground_v9RC8"}},26765:(e,t,a)=>{a.d(t,{Z:()=>o});const o={"app-control-panel":"ControlPanel_app-control-panel_jJxW7",container:"ControlPanel_container_a7krA",sidebar:"ControlPanel_sidebar_IRjkw","sidebar-btn":"ControlPanel_sidebar-btn_DAKXR",ic:"ControlPanel_ic_goa1O","container-control_panel":"ControlPanel_container-control_panel_giy4w"}},44600:(e,t,a)=>{a.d(t,{Z:()=>o});const o={"tools-bar":"ToolsBar_tools-bar_hjSGe","tools-bar--inner":"ToolsBar_tools-bar--inner_tXYTf","pos--center":"ToolsBar_pos--center_dfHZ5","pos--left":"ToolsBar_pos--left__pjmr","pos--right":"ToolsBar_pos--right_lLBVv","editor-controller":"ToolsBar_editor-controller_MAZ1z","btn-group":"ToolsBar_btn-group_e8W5t",btn:"ToolsBar_btn_yQB7D","divide-line":"ToolsBar_divide-line_FPCf8","theme-controller":"ToolsBar_theme-controller_gGFee","theme-btn":"ToolsBar_theme-btn_lBmhr","agent-controller":"ToolsBar_agent-controller_UhlJ7","agent-inner":"ToolsBar_agent-inner_oPLBL","agent-btn":"ToolsBar_agent-btn_ffR1O","btn-shadow":"ToolsBar_btn-shadow_GEUV9"}},56908:(e,t,a)=>{a.d(t,{Z:()=>o});const o={"module-lib-panel":"ModuleLibrary_module-lib-panel_pUfkn","panel-head":"ModuleLibrary_panel-head_OlrHK","panel-body":"ModuleLibrary_panel-body_rWoq1","tab-item":"ModuleLibrary_tab-item_yNm_s","tab-bar":"ModuleLibrary_tab-bar_rUTyd","tab-bar--inner":"ModuleLibrary_tab-bar--inner_c2ek2","tab-active--shadow":"ModuleLibrary_tab-active--shadow_eBATs","container-modules":"ModuleLibrary_container-modules_bA3LM","wrapper-module_item":"ModuleLibrary_wrapper-module_item_KNCF0"}},17905:(e,t,a)=>{a.d(t,{Z:()=>o});const o={custom_layer:"CustomLayer_custom_layer_i5kbn",attr_set_group:"CustomLayer_attr_set_group_gxYTv",user_editor_confirm:"CustomLayer_user_editor_confirm_SawrF","page_editor-layout":"CustomLayer_page_editor-layout_WDwC2",item:"CustomLayer_item_gXeqv",item_son:"CustomLayer_item_son_PNf8Q",attr_set_item:"CustomLayer_attr_set_item_RKpkt",item_header:"CustomLayer_item_header_LNvJM",value_input:"CustomLayer_value_input_PKMkL",input:"CustomLayer_input_T8BXq",user_editor_mes:"CustomLayer_user_editor_mes_ikpXP"}},11247:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var o=a(32216),i=a.n(o),l={};for(const r in o)"default"!==r&&(l[r]=()=>o[r]);a.d(t,l);const n=i()},68723:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var o=a(81508),i=a.n(o),l={};for(const r in o)"default"!==r&&(l[r]=()=>o[r]);a.d(t,l);const n=i()},50554:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var o=a(60042),i=a.n(o),l={};for(const r in o)"default"!==r&&(l[r]=()=>o[r]);a.d(t,l);const n=i()},12185:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var o=a(43951),i=a.n(o),l={};for(const r in o)"default"!==r&&(l[r]=()=>o[r]);a.d(t,l);const n=i()},12136:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var o=a(62826),i=a.n(o),l={};for(const r in o)"default"!==r&&(l[r]=()=>o[r]);a.d(t,l);const n=i()},64427:(e,t,a)=>{a.d(t,{s:()=>o,x:()=>i});var o=function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t("div",{staticClass:"page_editor",class:e.$style["app-container"],attrs:{id:"pageEditorContainer","data-size":o.containerSize}},[t(o.ToolsBar,{attrs:{disableUploader:o.removeUpload,containerSize:o.containerSize},on:{setEditorState:o.setEditorState,setEditorAgent:o.setEditorAgent,setEditorTheme:o.setEditorTheme,exitEditor:o.exitEditor,saveEditor:o.saveEditor}}),t("div",{class:e.$style["app-body"]},["fullScreen"===o.containerSize?t(o.ControlPanel,{directives:[{name:"show",rawName:"v-show",value:!["preview","startWithTemplate"].includes(o.editorState),expression:"!['preview', 'startWithTemplate'].includes(editorState)"}],on:{openPageShop:o.openPageShop}}):t("div",{class:e.$style["editor_iframe-cover"]},[o.pageIsEmpty&&o.pageShop?t("div",{class:e.$style["editor_iframe-editor_btn"],on:{click:function(e){return o.setEditorState("startWithTemplate")}}},[e._v(" 创建页面 ")]):t("div",{class:e.$style["editor_iframe-editor_btn"],on:{click:function(e){return o.setEditorState("editing")}}},[e._v(" 编辑页面 ")])]),t("div",{class:e.$style["app-playground"]},[o.frameLink?t("iframe",{ref:"innerFrame",class:e.$style["editor_iframe"],attrs:{id:"editor_iframe",src:o.frameLink}}):e._e(),o.sideControlStore.activePanel?t("div",{class:e.$style["frame-mask"],on:{click:o.closeControlPanel}}):e._e(),o.innerFrameInfo.loading?t("div",{staticClass:"flex items-center justify-center",class:e.$style["frame-loading"]},[t("img",{attrs:{src:a(13244),alt:"",srcset:""}})]):e._e()])],1)],1)},i=[]},52930:(e,t,a)=>{a.r(t)},32216:function(e,t,a){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(70538),l=o(a(75851)),n=o(a(90162)),r=a(80429),s=a(37169),d=a(70538),u=o(a(57926)),c=o(a(3330)),p=a(62630);t["default"]=(0,i.defineComponent)({__name:"App",setup(e){const t=(0,r.useEditorStore)(),a=(0,p.useSideControlStore)(),{editorState:o,editorTheme:i,pageIsEmpty:_,innerFrameInfo:m}=(0,s.storeToRefs)(t),{removeUpload:f,appPath:y,pageShop:v,on:g}=(0,d.inject)("appConfig"),h=(0,d.computed)((()=>"PageShopWindow"===m.value.name?"fullScreen"==w.value?y+"shop.html":"":y+"index.html")),b=(0,d.ref)(null);(0,d.watch)((()=>m.value.reload),(()=>{requestAnimationFrame((()=>{b.value.contentWindow?.location.reload()}))}));const C=(0,d.inject)("getEditorControl"),w=(0,d.computed)((()=>["editing","preview","startWithTemplate"].includes(o.value)?(g.sizeChange?.("fullscreen"),"fullScreen"):(g.sizeChange?.("min"),"")));function P(e){t.setEditorState(e)}function E(e){C()?.setAgent(e,(()=>{t.setEditorAgent(e)}))}function S(e){t.setEditorTheme(e)}function L(){C()?.saveEditor((()=>{P("initial")}))}function $(){const e=C(),t=e.testDataChange(),a=e.confirmPanelClose();if(!a)return!1;t?u.default.createDialog({propsData:{posType:"center",transmitData:{propsData:{title:"是否退出页面？",desc:"<p>为防止页面数据丢失，请检查页面是否保存后，再退出。</p>",buttons:[{theme:"yellow",text:"确认",handler:e=>{C()?.cancelEditor(),P("initial"),e?.()}},{text:"取消",handler:e=>{console.log("cancel"),e?.()}}]}}},content:c.default}):(C()?.cancelEditor(!1),P("initial"))}function T(){C()?.openPageShop()}function M(){a.clearControl()}return(0,d.watch)(o,(e=>{a.clearControl(),C()?.setState(e)})),(0,d.watch)(i,(e=>{C()?.setTheme(e)})),{__sfc:!0,editorStore:t,sideControlStore:a,editorState:o,editorTheme:i,pageIsEmpty:_,innerFrameInfo:m,removeUpload:f,appPath:y,pageShop:v,on:g,frameLink:h,innerFrame:b,getEditorControl:C,containerSize:w,setEditorState:P,setEditorAgent:E,setEditorTheme:S,saveEditor:L,exitEditor:$,openPageShop:T,closeControlPanel:M,ToolsBar:l.default,ControlPanel:n.default}}})},81508:function(e,t,a){var o=a(26038)["gsap"],i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=a(70538),n=a(70538),r=a(37169),s=i(a(63414)),d=a(80429),u=a(62630);t["default"]=(0,l.defineComponent)({__name:"ControlPanel",emits:["openPageShop"],setup(e,{emit:t}){const a=(0,d.useEditorStore)(),i=(0,u.useSideControlStore)(),{activeControl:l,moduleLib:c,activePanel:p}=(0,r.storeToRefs)(i),_={openModuleLib:{name:"openModuleLib",panel:"moduleLib"}};function m(e,t){if($(e.currentTarget).attr("data-select"))i.clearControl();else{const e=_[t];a.setEditingModuleId({layout_group_id:"",layout_id:""}),i.changeModuleLibFilter({showModulesType:["layout","layout_group"]}),i.changeControl(e.name),e.panel&&i.openPanel(e.panel)}}const f=(0,n.ref)(null);function y(e=0,t){o.to(f.value,{width:e,duration:.36,onComplete(){t?.()}})}const v=(0,n.ref)(null);(0,n.watch)(p,(e=>{if(e){switch(p.value){case"moduleLib":v.value=s.default;break;default:break}requestAnimationFrame((()=>{y($(f.value).children().width())}))}else y(0,(()=>{v.value=null}))}));const g=(0,n.inject)("appConfig"),h=(0,n.computed)((()=>{const e=c.value.showModulesType;if(g.moduleLib.online)return{default:"OnlineTemplateLayer",tabCards:[{name:e.includes("layout_group")?"布局库":"模块库",type:"OnlineTemplateLayer"},{name:"自定义",type:"CustomLayer"},{name:"功能插件",type:"FunLayer"},{name:"粘贴代码",type:"CodeLayer"}]};{const e=window[g.moduleLib.type+"_CUSTOM"];return{default:"TemplateLayer",tabCards:[...e]}}}));function b(){t("openPageShop")}return{__sfc:!0,editorStore:a,sideControlStore:i,activeControl:l,moduleLib:c,activePanel:p,commandData:_,sideBtnClick:m,panelContainer:f,changePanelContainerSize:y,showPanel:v,APP_CONFIG:g,addModuleTabsParam:h,emit:t,openPageShop:b}}})},60042:function(e,t,a){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(70538),l=a(80429),n=a(37169),r=a(70538),s=a(26038),d=o(a(57926)),u=o(a(3330));t["default"]=(0,i.defineComponent)({__name:"ToolsBar",props:{disableUploader:{type:Boolean,default:!1},containerSize:{default:""}},emits:["exitEditor","saveEditor","setEditorState","setEditorAgent","setEditorTheme"],setup(e,{emit:t}){const a=(0,l.useEditorStore)(),{editorState:o,editorAgent:i,editorTheme:c,pageIsEmpty:p,innerFrameInfo:_}=(0,n.storeToRefs)(a),m=(0,r.computed)((()=>"editing"===o.value)),f=(0,r.inject)("getEditorControl"),y=(0,r.inject)("uploaderPageData"),{pageShop:v}=(0,r.inject)("appConfig");function g(){f()?.downloadPageData()}function h(e){t("setEditorTheme",e)}function b(e){t("setEditorState",e)}function C(){t("saveEditor")}function w(){t("exitEditor")}function P(){const e=_.value.name;"EditorPageWindow"===e?d.default.createDialog({propsData:{container:"#pageEditorContainer",posType:"center",transmitData:{propsData:{title:"是否确认上传文件？",desc:"<p>上传文件后将替换当前页面数据，是否确认上传？</p>",buttons:[{text:"取消",handler:e=>{e?.()}},{theme:"yellow",text:"确认",handler:e=>{y(),e?.()}}]}}},content:u.default}):"PageShopWindow"===e&&y()}const E=(0,r.ref)(null),S=(0,r.ref)(null);function L(e){t("setEditorAgent",e)}return(0,r.watch)(i,(()=>{requestAnimationFrame((()=>{const e=$(S.value).find("[data-active]");s.gsap.to(E.value,{width:e.width(),duration:.3,left:()=>e[0].getBoundingClientRect().left-e.parent()[0].getBoundingClientRect().left})}))})),{__sfc:!0,editorStore:a,editorState:o,editorAgent:i,editorTheme:c,pageIsEmpty:p,innerFrameInfo:_,isEditing:m,emit:t,getEditorControl:f,uploaderPageData:y,pageShop:v,downloadPageData:g,setEditorTheme:h,setEditorState:b,saveEditor:C,exitEditor:w,fireUploaderPageData:P,agentShadow:E,agentController:S,setEditorAgent:L}}})},43951:function(e,t,a){var o=a(26038)["gsap"],i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=a(70538),n=a(70538),r=i(a(89811)),s=i(a(82680)),d=i(a(30459)),u=i(a(69123)),c=i(a(11939)),p=a(80429);t["default"]=(0,l.defineComponent)({__name:"ModuleLibrary",props:{defaultTabCard:{default:"TemplateLayer"},openState:{type:Boolean,default:!1},tabCard:{default:()=>[{name:"默认组件",type:"TemplateLayer"},{name:"自定义",type:"CustomLayer"},{name:"功能插件",type:"FunLayer"},{name:"粘贴代码",type:"CodeLayer"}]}},emits:["updateSize"],setup(e,{emit:t}){const a=e,i=(0,p.useEditorStore)(),l=(0,n.ref)("default"),_=(0,n.ref)(null);function m(){l.value="big",requestAnimationFrame((()=>{t("updateSize",$(_.value).width())}))}const f={FunLayer:u.default,CodeLayer:c.default,CustomLayer:d.default,TemplateLayer:r.default,OnlineTemplateLayer:s.default},y=(0,n.computed)((()=>f[v.value||a.defaultTabCard])),v=(0,n.ref)("");(0,n.watch)(v,(e=>{b(e),m()}));const g=(0,n.ref)(null),h=(0,n.ref)(null);function b(e){const t=$(g.value).filter('[data-type="'+e+'"]');o.to(h.value,{duration:.36,width:()=>$(g.value).width()||0,left:()=>t[0].getBoundingClientRect().left-t.parent()[0].getBoundingClientRect().left})}const C=(0,n.toRef)(a,"openState");(0,n.watch)(C,(e=>{e&&(v.value||(v.value=a.defaultTabCard))}),{immediate:!0});const w=(0,n.inject)("getEditorControl");function P(e){w()?.addNewLayoutModule({type:e.type||"add_new_layout_module",moduleData:e.layerData,relateModuleId:i.editingModuleId},((t,a)=>{a.relate_data&&i.setEditingModuleId(a.relate_data),e.onAddSuc?.()}))}return{__sfc:!0,editorStore:i,emit:t,panelType:l,panel:_,updateSize:m,modulePanelModules:f,prop:a,showLibPanel:y,activeTabCard:v,tabItem:g,tabShadow:h,changeTabShadow:b,openState:C,getEditorControl:w,addNewLayoutModule:P}}})},85354:(e,t,a)=>{Object.defineProperty(t,"X",{value:!0});const o=a(70538),i=a(70538);t.Z=(0,o.defineComponent)({__name:"CodeLayer",emits:["addNewLayoutModule"],setup(e,{emit:t}){const a=(0,i.ref)("");function o(){if(!a.value.length)return!1;t("addNewLayoutModule",{layerData:a.value,onAddSuc:()=>{a.value=""}})}return{__sfc:!0,emit:t,userCode:a,userCodeConfirm:o}}})},62826:function(e,t,a){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(70538),l=a(70538),n=o(a(17696));t["default"]=(0,i.defineComponent)({__name:"CustomLayer",emits:["addNewLayoutModule"],setup(e,{emit:t}){const a=[{nav:"固定分栏",card_slot_name:"fixedLayout"},{nav:"自定义分栏",card_slot_name:"customLayout"}],o=[{grid_col:1,item_col:[],value:"100"},{grid_col:2,item_col:[],value:"50_50"},{grid_col:10,item_col:[4,6],value:"40_60"},{grid_col:10,item_col:[6,4],value:"60_40"},{grid_col:10,item_col:[3,7],value:"30_70"},{grid_col:10,item_col:[7,3],value:"70_30"},{grid_col:3,item_col:[],value:"33_33_33"},{grid_col:4,item_col:[2,0,0],value:"50_25_25"},{grid_col:4,item_col:[1,1,2],value:"25_25_50"},{grid_col:4,item_col:[1,2,1],value:"25_50_25"},{grid_col:4,item_col:[],value:"25_25_25_25"},{grid_col:5,item_col:[],value:"20_20_20_20_20"}],i=(0,l.ref)("fixed"),r=(0,l.ref)("100"),s=(0,l.reactive)({col:"2",data:[3,3]});function d(e,t){s.data[t]=/^[0-9]+$/.test(e)?Math.min(Math.max(1,+e),6):parseInt(e)||void 0}function u(e){switch(e){case"2":s.data=[3,3];break;case"3":s.data=[2,2,2];break;default:break}}const c=(0,l.computed)((()=>{let e=0;return s.data.forEach((t=>{t&&(e+=t)})),6==e}));function p(e,a){i.value=e,r.value=a,t("addNewLayoutModule",{layerData:{type:"custom",value:a}})}function _(){if(!c.value)return!1;t("addNewLayoutModule",{layerData:{type:"custom",value:s.data.map((e=>e+"--6")).join("_")}})}return{__sfc:!0,tabCards:a,customOptions:o,type:i,value:r,userCustomData:s,userCustomDataChange:d,userCustomColChange:u,userCustomIsReady:c,emit:t,addFixedColModule:p,userEditorConfirm:_,TabCard:n.default}}})},21864:(e,t,a)=>{Object.defineProperty(t,"X",{value:!0});const o=a(70538);t.Z=(0,o.defineComponent)({__name:"FunLayer",emits:["addNewLayoutModule"],setup(e,{emit:t}){function a(e){t("addNewLayoutModule",{layerData:{type:"fun",value:e}})}return{__sfc:!0,emit:t,addHandleModule:a}}})},57715:(e,t,a)=>{Object.defineProperty(t,"X",{value:!0});const o=a(70538),i=a(70538),l=a(62630),n=a(77171),r=a(37169);t.Z=(0,o.defineComponent)({__name:"OnlineTemplateLayer",emits:["addNewLayoutModule"],setup(e,{emit:t}){const a=(0,l.useSideControlStore)(),{moduleLib:o}=(0,r.storeToRefs)(a),s=(0,i.inject)("appConfig"),d=(0,i.ref)(!1),u=(0,i.ref)(null),c=(0,i.ref)(null),p=(0,i.ref)([]),_=(0,i.ref)([]),m=(0,i.ref)(0),f=(0,i.ref)([]),y=(0,i.computed)((()=>f.value.filter((e=>{let t=!0;return g.value&&e.cat!=g.value&&(t=!1),t})))),v=(0,i.ref)(1),g=(0,i.ref)(""),h=s.moduleLib.type,b=(0,i.ref)(""),C=(0,i.computed)((()=>o.value.showModulesType.includes("layout_group")?0:1));function w(e={style:"",cat:"",page:1,type:C.value},t="replace"){d.value=!0,"MODULES_FOOTER"===h&&(e.cat="footer"),(0,n.getTemplateList)(e).then((a=>{if(0===a.code){if("MODULES_FOOTER"===h){e.cat="footer";const t=a.data.cat.filter((e=>e.total>0&&"footer"===e.value));_.value=t,g.value="footer"}else{const e=a.data.cat.filter((e=>e.total>0));e.unshift({lable:"全部",total:-1,value:""}),_.value=e}"replace"==t?f.value=a.data.list.data:f.value.push(...a.data.list.data),p.value=[{lable:"全部",value:""},...a.data.style],m.value=a.data.list.page_total}})).finally((()=>{d.value=!1,"replace"===t&&$(u.value).scrollTop(0)}))}function P(e){g.value=e,v.value=1,w({style:b.value,cat:e,page:1,type:C.value})}function E(e){b.value=e,w({style:e,cat:g.value,page:1,type:C.value})}let S=!1;function L(e){S||(S=!0,(0,n.getTemplateData)({id:e.id}).then((e=>{if(0!==e.code)return;const a=e.data.post.json;a&&t("addNewLayoutModule",{type:"addPageTemplate",layerData:a})})).finally((()=>{S=!1})))}return(0,i.onMounted)((()=>{g.value="",w();const e=new IntersectionObserver((e=>{e.forEach((e=>{e.intersectionRatio>=.5&&!d.value&&v.value<m.value&&(v.value+=1,w({style:b.value,cat:g.value,page:v.value,type:C.value},"add"))}))}),{threshold:[.5]});e.observe(c.value),(0,i.onBeforeUnmount)((()=>{e.disconnect()}))})),{__sfc:!0,sideControlStore:a,moduleLib:o,appConfig:s,moduleListUpdating:d,scrollBox:u,pageCounter:c,thumbOption:p,moduleCategory:_,totalPage:m,moduleList:f,showModuleList:y,currentPage:v,selectCategory:g,moduleLibType:h,selectThumb:b,showModuleType:C,updateModuleList:w,itemClick:P,changeStyle:E,emit:t,moduleAdding:S,addModule:L}}})},86588:(e,t,a)=>{Object.defineProperty(t,"X",{value:!0});const o=a(70538),i=a(70538),l=a(37169),n=a(62630);t.Z=(0,o.defineComponent)({__name:"TemplateLayer",emits:["addNewLayoutModule"],setup(e,{emit:t}){const a=(0,n.useSideControlStore)(),o=(0,i.ref)(-1),r=(0,i.inject)("appConfig"),s=(0,i.inject)("getEditorControl"),{moduleLib:d}=(0,l.storeToRefs)(a),u=r.moduleLib.type,c=(0,i.computed)((()=>window[u].filter((e=>e.list.some((e=>d.value.showModulesType.includes(e.type))))))),p=(0,i.ref)([]),_=(0,i.ref)(null);function m(e){o.value=e,p.value=c.value[e].list,requestAnimationFrame((()=>{$(_.value).scrollTop(0)}))}function f(e){!e&&e.data?s()?.innerMessage({message:"格式错误",offset:-1,duration:2e3,type:"warning"}):t("addNewLayoutModule",{layerData:e.data})}return(0,i.onMounted)((()=>{o.value=0,p.value=c.value[0].list})),{__sfc:!0,sideControlStore:a,selectCategory:o,appConfig:r,getEditorControl:s,moduleLib:d,moduleLibType:u,showModuleList:c,selectModuleGroup:p,scrollBox:_,itemClick:m,emit:t,addModule:f}}})},49653:(e,t,a)=>{Object.defineProperty(t,"X",{value:!0});const o=a(70538);t.Z=(0,o.defineComponent)({__name:"PopPanel",props:{title:{default:"您确定删除此模板吗？"},desc:{default:"<p>删除后，此模板将移入回收站中，<span class='red'>30天</span>后将自动永久删除</p>"},buttons:{default:()=>[{text:"取消",handler:e=>{console.log("cancel"),e?.()}},{theme:"yellow",text:"确认",handler:e=>{console.log("confirm"),e?.()}}]}},emits:["close"],setup(e,{emit:t}){const a=e;function o(){t("close")}function i(e){a.buttons[e].handler((()=>{o()}))}return{__sfc:!0,prop:a,emit:t,close:o,btnClick:i}}})},92400:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={MO005:{uploadPath:"/service/editorUpload.php?action=uploadimage&encode=utf-8",publicPath:"/templates/templates/editor_page/",resourceLink:"http://resources.jsmo.xin",uploadName:"Filedata",imageDataPath:"url",imageUploadSize:"1024",uploadFileSize:"2048"},singlePage:{uploadPath:"/api/upload_img.html",publicPath:"/views/13450/pc/editor_page/bc/",resourceLink:"",uploadName:"Filedata",imageDataPath:"url",imageUploadSize:"1024",uploadFileSize:"2048"},uemo:{uploadPath:"/admin/setting/upload",publicPath:"/templates/templates/editor_page/",resourceLink:"//super_admin.uemo.net/",uploadName:"file",imageDataPath:"data.url",imageUploadSize:"1024",uploadFileSize:"2048"},custom:{uploadPath:"/admin/setting/upload",publicPath:"/editor_page/",resourceLink:"//super_admin.uemo.net/",uploadName:"file",imageDataPath:"data.url",imageUploadSize:"1024",uploadFileSize:"2048"}}},31803:(e,t)=>{function a(e,t){return function(a,o){e.postMessage({code:"200",name:a,msg:"",data:{...o,GUID:t}},"*")}}Object.defineProperty(t,"__esModule",{value:!0}),t.setPostMsgControl=void 0,t.setPostMsgControl=a},77171:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTemplateData=t.getTemplateList=void 0;const o=a(50686);function i(e){return o.AxiosMoue5.get("/units/list.php",{params:e})}function l(e){return o.AxiosMoue5.get("/units/post.php",{params:e})}t.getTemplateList=i,t.getTemplateData=l},78235:(e,t,a)=>{window.DOMAIN_CONFIG={DOMAIN_MAIN:window.CCONFIG?.DOMAIN_MAIN||"uemo.net",DOMAIN_LINE:window.CCONFIG?.DOMAIN_LINE||"jsmo.xin"},window.name="EditorControlWindow",window.addEventListener("message",(e=>{r(e)})),a(14734),a(52930),a(74251),a(89694),a(96718),a(35803);const o=a(31803),i=a(35803);window.GUID=window.location.search.slice(1).split("=")[1];const l=(0,o.setPostMsgControl)(window.parent,window.GUID);function n(e){(0,i.createPageEditor)($("body"),{...e,on:{beforeCreate(){},editorFrameMounted(){},editorDataUpload(){},saveEditor({data:e,encrypt_data:t,hasChange:a}){l("saveEditor",{data:e,encrypt_data:t,hasChange:a})},cancelEditor(){},sizeChange(e){l("changeEditorSize",{type:e})}}}).init()}function r(e){const t=e.data;if(200==t?.code&&t.data.GUID===window.GUID)switch(t.name){case"initEditor":n(t.data.editorConfig);break;default:break}}window.onload=function(){l("windowLoadEnd",{pageLoaded:!0})}},54190:function(e,t,a){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(a(70538)),l=a(37169),n=(0,l.createPinia)();i.default.use(l.PiniaVuePlugin),t["default"]=n},69527:function(e,t,a){var o=a(34344),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=i(a(50361)),n=a(91063),r=i(a(57926)),s=i(a(3330)),d=a(12171);class u{constructor(e,t){o(this,"win",void 0),o(this,"param",void 0),o(this,"reader",new FileReader),o(this,"lastSaveEditorData",void 0),o(this,"editorState","initial"),this.win=e,this.param=t,this.setData({editor_data:t.editorData}),this.lastSaveEditorData=this.getData().encrypt_data}getData(){return this.win.get_data()}saveEditor(e,t){const a=this.getData();if(this.win.document.querySelector("#page_body_editor-wrapper.is_editing"))alert("请先关闭当前编辑");else{const o=this.testDataChange()||!!t?.forceSave;this.param.onConfirm({data:a.data,encrypt_data:a.encrypt_data,store:a.store,hasChange:o}),this.lastSaveEditorData=a.encrypt_data,e?.()}}openPageShop(){this.win.document.querySelector("#page_body_editor-wrapper.is_editing")?r.default.createDialog({propsData:{posType:"center",transmitData:{propsData:{title:"提示",desc:"<p class='yellow'>在进入页面库之前，请先关闭当前编辑面板。</p>",buttons:[{theme:"yellow",text:"确认",handler:e=>{e?.()}}]}}},content:s.default}):r.default.createDialog({propsData:{posType:"center",transmitData:{propsData:{title:"是否保存当前页面？",desc:"<p>在进入页面库之前，<span class='yellow'>将会对当前页面进行保存</span>。</p>",buttons:[{theme:"yellow",text:"保存，并进入页面库",handler:e=>{this.saveEditor((()=>{requestAnimationFrame((()=>{d.EditorControlEmitter.emit("changeFrameName","PageShopWindow"),e?.()}))}))}},{text:"取消",handler:e=>{e?.()}}]}}},content:s.default})}testDataChange(){const e=this.getData().encrypt_data;return(0,n.decrypt)(e)!==(0,n.decrypt)(this.lastSaveEditorData)}confirmPanelClose(){return!this.win.document.querySelector("#page_body_editor-wrapper.is_editing")||(alert("请先关闭当前编辑"),!1)}cancelEditor(e=!0){e&&this.setData({editor_data:this.lastSaveEditorData}),this.param.onCancel?.()}downloadPageData(){this.win.download_page_data()}uploaderPageData(){const e=$("input[name='page_data_txt']");$(e).off("change").on({change:e=>{const t=e.target.files;t&&t[0]&&this.reader.readAsText(t[0])}}),this.reader.onload=e=>{this.win.set_data(this.win.decrypt_page_data(e.target?.result||"")),this.param.onUpload(this.getData())},e.trigger("click")}setTheme(e){this.win.set_theme(e)}setAgent(e,t){const a=this.win.getPageEditorState();"editing"!==a?(this.win.set_agent(e),t?.()):this.innerMessage({message:"请先保存当前编辑后再进行切换",offset:-1,duration:2e3,type:"warning"})}setData(e){"string"===typeof e.editor_data?this.win.set_data(e.editor_data):this.win.set_data((0,l.default)(e).editor_data)}setState(e){e!==this.editorState&&("preview"===e?this.win.preview_page(!0):"preview"===this.editorState&&this.win.preview_page(!1),this.editorState=e)}addNewLayoutModule(e,t){const a="addPageTemplate"===e.type?"layout_module/addPageTemplate":"layout_module/add_new_layout_module";this.win.VueComponentEditorPage.$store.dispatch(a,{data:e.moduleData,relate_data:e.relateModuleId,callback:(e,a)=>{a.dom&&a.dom.length&&(this.win.scrollTo({top:a.dom.offset().top,behavior:"smooth"}),t?.(e,a))}})}innerMessage(e){this.win.VueComponentEditorPage.$message(e)}}t["default"]=u},12171:function(e,t,a){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EditorControlEmitter=t.initWindowExport=void 0;const i=a(80429),l=a(62630),n=o(a(54190)),r=a(64720),s=o(a(57926)),d=o(a(3330)),u=o(a(10855)),c=(0,u.default)();function p(e){const t=(0,l.useSideControlStore)(n.default),a=(0,i.useEditorStore)(n.default);function o(t){const o=(0,r.Message)({message:"更换页面数据中....",offset:-1,duration:0,type:"error",customClass:"loading-msg",iconClass:"loading"});e.changeInitEditorData(t),a.setEditorState("editing"),c.emit("changeFrameName","EditorPageWindow"),c.on("editorPageLoaded",(()=>{e.editorControl?.saveEditor((()=>{o.close(),(0,r.Message)({message:"页面加载成功",offset:-1,duration:3e3,type:"success"})}),{forceSave:!0}),c.off("editorPageLoaded")}))}window.changeModuleLibFilter=function(e){t.changeModuleLibFilter(e)},window.openAddModulePanel=function(){t.changeControl("openModuleLib"),t.openPanel("moduleLib")},window.setRelateModuleId=function(e){a.setEditingModuleId(e)},window.changePageData=t=>{const a=!e.initEditorParam.editorData;a?o(t):s.default.createDialog({propsData:{posType:"center",transmitData:{propsData:{title:"确认替换原有页面",desc:"<p>是否确认替换原有的页面数据？</p>",buttons:[{theme:"yellow",text:"确认替换",handler:e=>{o(t),e?.()}},{text:"取消",handler:e=>{e?.()}}]}}},content:d.default})}}t.initWindowExport=p,t.EditorControlEmitter=c},35803:function(e,t,a){var o=a(34344),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createPageEditor=t.PageEditor=void 0;const l=i(a(70538)),n=i(a(50361)),r=i(a(54190)),s=i(a(48845)),d=i(a(69527)),u=i(a(8546)),c=a(80429),p=a(8403),_=i(a(92400));(0,p.directive)(l.default);const m=(0,c.useEditorStore)(r.default),f=a(12171);class y{constructor(e,t={}){o(this,"container",void 0),o(this,"option",void 0),o(this,"initEditorParam",{editorData:""}),o(this,"editorWin",null),o(this,"editorControl",null),o(this,"shopControl",null),o(this,"reader",new FileReader),this.container=$(e);const a=this.getDefaultOption(t.appName);if(this.option=Object.assign(a,t,{on:Object.assign(a.on,t.on)}),this.container.data("editor"))return this.container.data("editor");$(this.container).data("editor",this)}init(){this.initEditorParam.editorData=this.option.editorData,this.updatePageEmptyState(),window.editorFrameReady=e=>{e.createEditorApp({appName:this.option["appName"],moduleLib:this.option["moduleLib"],pageShop:this.option["pageShop"],uploadConfig:this.option["uploadConfig"]})},window.editorFrameMounted=e=>{"EditorPageWindow"==e.name?(this.editorControl=new d.default(e,{appConfig:this.option,editorData:this.initEditorParam.editorData,onConfirm:({data:e,hasChange:t,store:a,encrypt_data:o})=>{this.option.on.saveEditor({data:e,encrypt_data:o,hasChange:t}),this.initEditorParam.editorData=(0,n.default)(a),this.updatePageEmptyState()},onUpload:({data:e,encrypt_data:t})=>{this.option.on.editorDataUpload({data:e,encrypt_data:t})},onCancel:()=>{this.option.on.cancelEditor()}}),f.EditorControlEmitter.emit("editorPageLoaded"),this.shopControl=null):"PageShopWindow"===e.name?this.shopControl=new u.default(e,{allowEmpty:!this.initEditorParam.editorData,appName:this.option.appName,appPath:this.option.appPath}):(this.shopControl=null,this.editorControl=null),f.EditorControlEmitter.emit("innerFrameOnload",e.name)};const e=this.option.on.beforeCreate();if(e instanceof Promise)e.then((()=>{const e=this.createApp();$(this.container).append(e.$el)}));else{const e=this.createApp();$(this.container).append(e.$el)}return this}changeInitEditorData(e){this.initEditorParam.editorData=e,this.updatePageEmptyState()}updatePageEmptyState(){m.setPageEmptyState(!this.initEditorParam.editorData)}getDefaultOption(e="custom"){return{appName:e,appPath:"/",editorData:"",pageShop:!0,removeUpload:!1,moduleLib:{online:["MO005","uemo"].includes(e),type:"MODULES"},uploadConfig:_.default[e],on:{beforeCreate(){return console.log("beforeCreate"),Promise.resolve()},editorFrameMounted(){console.log("iframe_mounted")},editorDataUpload(){console.log("data_upload")},saveEditor(){console.log("editor confirmed")},cancelEditor(){console.log("editor canceled")}}}}uploaderPageData(){const e=$("input[name='page_data_txt']");$(e).off("change").on({change:e=>{const t=e.target.files;t&&t[0]&&this.reader.readAsText(t[0])}}),this.reader.onload=e=>{window.changePageData(e.target?.result||"")},e.trigger("click")}createApp(){const e=this,t=this.initEditorParam.editorData;let a="EditorPageWindow";this.option.pageShop&&!t&&(a="PageShopWindow"),m.setInnerFrameInfo({reload:!1,loading:!1,name:a});const o=new l.default({data(){return{}},render:e=>e(s.default),provide(){return{appConfig:e.option,getEditorControl:()=>e.editorControl,getShopControl:()=>e.shopControl,uploaderPageData:()=>{e.uploaderPageData()}}},pinia:r.default,beforeMount(){(0,f.initWindowExport)(e)},computed:{editorState(){return m.editorState}},watch:{editorState(e){"editing"===e&&"PageShopWindow"===m.innerFrameInfo.name&&f.EditorControlEmitter.emit("changeFrameName","EditorPageWindow")}},mounted(){f.EditorControlEmitter.on("changeFrameName",(e=>{m.changeFrameName(e)})),f.EditorControlEmitter.on("innerFrameOnload",(()=>{m.setInnerFrameInfo({loading:!1})}))}}).$mount();return o}}function v(e,t){return new y(e,t)}t.PageEditor=y,t.createPageEditor=v},8546:(e,t,a)=>{var o=a(34344);Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e,t){o(this,"win",void 0),o(this,"param",void 0),o(this,"reader",new FileReader),this.win=e,this.param=t,e.setShopWinOption({allowEmpty:t.allowEmpty,appName:t.appName,appPath:t.appPath})}}t["default"]=i},80429:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useEditorStore=void 0;const o=a(37169);t.useEditorStore=(0,o.defineStore)("editor",{state:()=>({innerFrameInfo:{reload:!1,loading:!1,name:""},pageIsEmpty:!0,editorState:"initial",editorAgent:"pc",editorTheme:"white",editingModuleId:{layout_group_id:"",layout_id:""}}),actions:{setInnerFrameInfo(e){this.innerFrameInfo=Object.assign(this.innerFrameInfo,e)},setPageEmptyState(e){this.pageIsEmpty=e},setEditorState(e){this.editorState=e},setEditorAgent(e){this.editorAgent=e},setEditorTheme(e){this.editorTheme=e},setEditingModuleId(e){this.editingModuleId=Object.assign({layout_group_id:"",layout_id:""},e)},changeFrameName(e){const t=this.innerFrameInfo;t.name===e&&"EditorPageWindow"===e?(t.loading=!0,t.reload=!t.reload):t.name!=e&&("PageShopWindow"===e&&"startWithTemplate"!==this.editorState&&(this.editorState="startWithTemplate"),t.name=e,t.loading=!0)}}})},62630:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useSideControlStore=void 0;const o=a(37169);t.useSideControlStore=(0,o.defineStore)("sideControl",{state:()=>({activeControl:"",activePanel:"",moduleLib:{showModulesType:["layout","layout_group"]}}),actions:{clearControl(){this.activeControl="",this.activePanel&&(this.activePanel="")},changeControl(e){this.activeControl=e},openPanel(e){this.activePanel=e},closePanel(){this.activePanel=""},changeModuleLibFilter(e){this.moduleLib.showModulesType=e.showModulesType}}})},22541:(e,t,a)=>{a.d(t,{s:()=>o,x:()=>i});var o=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{class:e.$style["app-control-panel"]},[t("div",{class:e.$style["container"]},[t("div",{staticClass:"flex flex-col justify-between",class:e.$style["sidebar"]},[t("div",{class:e.$style["editor-control"]},[t("div",{directives:[{name:"label",rawName:"v-label",value:"添加板块",expression:"'添加板块'"}],class:[e.$style["btn--open-module-panel"],e.$style["sidebar-btn"]],attrs:{"data-select":"openModuleLib"===a.activeControl},on:{click:function(e){return a.sideBtnClick(e,"openModuleLib")}}},[t("i",{staticClass:"ic iconfont icon-tianjia"})])]),t("div",{class:e.$style["manage-control"]},[a.APP_CONFIG.pageShop?t("div",{directives:[{name:"label",rawName:"v-label",value:"页面库",expression:"'页面库'"}],class:[e.$style["btn--open-module-panel"],e.$style["sidebar-btn"]],on:{click:function(e){return a.openPageShop()}}},[t("i",{staticClass:"ic iconfont icon-xiangmu"})]):e._e()])]),t("div",{ref:"panelContainer",class:e.$style["container-control_panel"]},[t(a.showPanel,{tag:"component",attrs:{tabCard:a.addModuleTabsParam.tabCards,defaultTabCard:a.addModuleTabsParam.default,openState:"moduleLib"===a.activePanel},on:{updateSize:a.changePanelContainerSize}})],1)])])},i=[]},72341:(e,t,a)=>{a.d(t,{s:()=>o,x:()=>i});var o=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"page_editor_toolsbar",class:e.$style["tools-bar"],attrs:{"data-state":a.editorState,"data-size":e.containerSize}},[t("div",{class:e.$style["tools-bar--inner"]},[t("div",{class:e.$style["pos--left"]},[t("div",{class:e.$style["btn-group"]},[a.pageIsEmpty&&a.pageShop?t("div",{class:e.$style["btn"],attrs:{alt:"创建页面","data-name":"editor_dom","data-disable":"startWithTemplate"===a.editorState},on:{click:function(e){return a.setEditorState("startWithTemplate")}}},[t("span",[e._v("创建页面")])]):t("div",{class:e.$style["btn"],attrs:{alt:"编辑页面","data-name":"editor_dom","data-disable":a.isEditing||"startWithTemplate"===a.editorState},on:{click:function(e){return a.setEditorState("editing")}}},[t("span",[e._v("编辑页面")])])])]),t("div",{class:e.$style["pos--center"]},[t("div",{class:e.$style["editor-controller"]},[a.isEditing?[t("div",{class:e.$style["theme-controller"]},[t("span",{class:e.$style["theme-btn"],attrs:{"data-active":"white"===a.editorTheme,"data-value":"white"},on:{click:function(e){return a.setEditorTheme("white")}}}),t("span",{class:e.$style["theme-btn"],attrs:{"data-active":"black"===a.editorTheme,"data-value":"black"},on:{click:function(e){return a.setEditorTheme("black")}}})]),t("div",{class:e.$style["divide-line"]})]:e._e(),a.isEditing||"preview"===a.editorState?[t("div",{ref:"agentController",class:e.$style["agent-controller"]},[t("div",{class:e.$style["agent-inner"]},[t("span",{staticClass:"iconfont icon-diannao",class:e.$style["agent-btn"],attrs:{"data-active":"pc"===a.editorAgent},on:{click:function(e){return a.setEditorAgent("pc")}}}),t("span",{staticClass:"iconfont icon-shouji",class:e.$style["agent-btn"],attrs:{"data-active":"mo"===a.editorAgent},on:{click:function(e){return a.setEditorAgent("mo")}}})]),t("div",{ref:"agentShadow",class:e.$style["btn-shadow"]})])]:e._e()],2)]),t("div",{class:e.$style["pos--right"]},[e.disableUploader||"initial"!==a.editorState?e._e():t("div",{class:e.$style["btn-group"]},[t("div",{class:e.$style["btn"],on:{click:a.fireUploaderPageData}},[t("span",{staticClass:"text"},[e._v("上传")])]),t("input",{staticStyle:{display:"none"},attrs:{type:"file",name:"page_data_txt",accept:".txt, .jsmo"}}),"EditorPageWindow"==a.innerFrameInfo.name?t("div",{class:e.$style["btn"],on:{click:a.downloadPageData}},[t("span",{staticClass:"text"},[e._v("下载")])]):e._e()]),a.isEditing?t("div",{class:e.$style["btn-group"]},[t("div",{class:e.$style["btn"],attrs:{"data-type":"preview"},on:{click:function(e){return a.setEditorState("preview")}}},[e._v(" 预览 ")]),t("div",{key:"confirm",class:e.$style["btn"],attrs:{"data-type":"confirm"},on:{click:a.saveEditor}},[e._v(" 保存 ")]),t("div",{key:"cancel",class:e.$style["btn"],attrs:{"data-type":"cancel"},on:{click:a.exitEditor}},[e._v(" 退出 ")])]):e._e(),"preview"===a.editorState||"startWithTemplate"===a.editorState&&!a.pageIsEmpty?t("div",{class:e.$style["btn-group"]},[t("div",{key:"editing",class:e.$style["btn"],attrs:{"data-type":"editing"},on:{click:function(e){return a.setEditorState("editing")}}},[e._v(" 返回编辑页面 ")])]):e._e(),"startWithTemplate"===a.editorState&&a.pageIsEmpty?t("div",{class:e.$style["btn-group"]},[t("div",{key:"cancel",class:e.$style["btn"],attrs:{"data-type":"exit"},on:{click:function(e){return a.setEditorState("initial")}}},[e._v(" 退出 ")])]):e._e()])])])},i=[]},88676:(e,t,a)=>{a.d(t,{s:()=>o,x:()=>i});var o=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{ref:"panel",class:e.$style["module-lib-panel"],attrs:{"data-type":a.panelType}},[t("div",{class:e.$style["panel-head"]},[t("div",{class:e.$style["tab-bar"]},[t("div",{class:e.$style["tab-bar--inner"]},[e._l(e.tabCard,(function({name:o,type:i}){return t("div",{key:i,ref:"tabItem",refInFor:!0,class:e.$style["tab-item"],attrs:{"data-active":a.activeTabCard===i,"data-type":i},on:{click:function(e){a.activeTabCard=i}}},[e._v(" "+e._s(o)+" ")])})),t("div",{ref:"tabShadow",class:e.$style["tab-active--shadow"]})],2)])]),t("div",{class:e.$style["panel-body"]},[t("div",{class:e.$style["container-modules"]},[t("div",{class:e.$style["wrapper-module_item"]},[t(a.showLibPanel,{tag:"component",on:{addNewLayoutModule:a.addNewLayoutModule}})],1)])])])},i=[]},88895:(e,t,a)=>{a.d(t,{s:()=>o,x:()=>i});var o=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t(a.TabCard,{ref:"tab_card",class:e.$style["custom_layer"],attrs:{tab_cards:a.tabCards},scopedSlots:e._u([{key:"fixedLayout",fn:function(){return[t("div",{class:e.$style["page_editor-layout"],attrs:{"data-pop":"body"}},[t("div",{staticClass:"page_editor-layout_options layout_grid layout_grid-col-2 layout_grid-rowspac-10 layout_grid-colspac-15"},e._l(a.customOptions,(function(o,i){return t("div",{key:i,staticClass:"layout_grid",class:[e.$style["item"],`layout_grid-col-${o.grid_col}`,{"layout_grid-colspac-3":o.grid_col>1},{active:"fixed"==a.type&&a.value==o.value}],attrs:{"data-value":o.value},on:{click:function(e){return a.addFixedColModule("fixed",o.value)}}},e._l(o.value.split("_"),(function(a,i){return t("div",{key:i,class:[e.$style["item_son"],o.item_col[i]?`layout_grid-item_clo-${o.item_col[i]}`:""]},[t("div",{staticClass:"des"},[e._v(" "+e._s(a)+" ")])])})),0)})),0)])]},proxy:!0},{key:"customLayout",fn:function(){return[t("div",{staticClass:"attr_set_groups"},[t("div",{class:e.$style["attr_set_group"]},[t("div",{staticClass:"flex_center",class:e.$style["attr_set_item"]},[t("div",{staticClass:"flex_fix",class:e.$style["item_header"]},[e._v(" 分栏个数 ")]),t("div",{staticClass:"flex_auto layout_grid layout_grid-col-3",class:e.$style["item_body"]},[t("c-radio",{staticClass:"space_normal",attrs:{label:"2"},on:{change:a.userCustomColChange},model:{value:a.userCustomData.col,callback:function(t){e.$set(a.userCustomData,"col",t)},expression:"userCustomData.col"}},[e._v("二栏")]),t("c-radio",{staticClass:"space_normal",attrs:{label:"3"},on:{change:a.userCustomColChange},model:{value:a.userCustomData.col,callback:function(t){e.$set(a.userCustomData,"col",t)},expression:"userCustomData.col"}},[e._v("三栏")])],1)])]),t("div",{class:[e.$style["attr_set_group"],e.$style["user_editor"]]},[t("div",{class:e.$style["attr_set_item"]},[t("div",{staticClass:"flex_fix",class:e.$style["item_header"]},[e._v(" 分栏占比 ")]),t("div",{staticClass:"flex_auto",class:e.$style["item_body"]},[t("div",{class:e.$style["page_editor-layout"]},[t("div",{staticClass:"page_editor-layout_options"},[t("div",{staticClass:"flex",class:e.$style["item"],staticStyle:{width:"100%"}},[e._l(a.userCustomData.data,(function(o,i){return[t("div",{key:i,staticClass:"flex_auto",class:e.$style["item_son"],style:{width:`${Math.min(Math.max(1,o||0),6)}00px`}},[t("div",{staticClass:"flex_auto flex_center",class:e.$style["value_input"]},[t("c-input",{class:e.$style["input"],style:{width:"auto"},attrs:{placeholder:"请输入分栏占比"},on:{input:function(e){return a.userCustomDataChange(a.userCustomData.data[i],i)}},model:{value:a.userCustomData.data[i],callback:function(t){e.$set(a.userCustomData.data,i,t)},expression:"\n                                                        userCustomData.data[\n                                                            sonKey\n                                                        ]\n                                                    "}})],1)]),i!==a.userCustomData.data.length-1?t("div",{key:"son"+i,staticClass:"flex_fix",staticStyle:{width:"3px","background-color":"#fff"}}):e._e()]}))],2)])]),t("span",{class:e.$style["user_editor_mes"]},[e._v("分栏总值为 6")])])])]),t("div",{class:e.$style["attr_set_group"]},[t("div",{class:[e.$style["user_editor_confirm"],{ready:a.userCustomIsReady}],on:{click:a.userEditorConfirm}},[e._v(" "+e._s(a.userCustomIsReady?"确认添加":"分栏总值需要为 6")+" ")])])])]},proxy:!0}])})},i=[]}},t={};function a(o){var i=t[o];if(void 0!==i)return i.exports;var l=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(l.exports,l,l.exports,a),l.loaded=!0,l.exports}a.m=e,(()=>{var e=[];a.O=(t,o,i,l)=>{if(!o){var n=1/0;for(u=0;u<e.length;u++){o=e[u][0],i=e[u][1],l=e[u][2];for(var r=!0,s=0;s<o.length;s++)(!1&l||n>=l)&&Object.keys(a.O).every((e=>a.O[e](o[s])))?o.splice(s--,1):(r=!1,l<n&&(n=l));if(r){e.splice(u--,1);var d=i();void 0!==d&&(t=d)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[o,i,l]}})(),(()=>{a.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return a.d(t,{a:t}),t}})(),(()=>{a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e)})(),(()=>{a.j=413})(),(()=>{var e={413:0};a.O.j=t=>0===e[t];var t=(t,o)=>{var i,l,n=o[0],r=o[1],s=o[2],d=0;if(n.some((t=>0!==e[t]))){for(i in r)a.o(r,i)&&(a.m[i]=r[i]);if(s)var u=s(a)}for(t&&t(o);d<n.length;d++)l=n[d],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(u)},o=self["webpackChunkeditor_page"]=self["webpackChunkeditor_page"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=a.O(void 0,[998,64],(()=>a(78235)));o=a.O(o)})();