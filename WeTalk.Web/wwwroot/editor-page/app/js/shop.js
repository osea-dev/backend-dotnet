(()=>{"use strict";var e={77286:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var s=a(15182),n=a(33040),i={};for(const d in n)"default"!==d&&(i[d]=()=>n[d]);a.d(t,i);var o=a(31760),l=a(1001);function r(e){this["$style"]=o.Z.locals||o.Z}var c=(0,l.Z)(n["default"],s.s,s.x,!1,r,null,null);const u=c.exports},13506:(e,t,a)=>{a.r(t),a.d(t,{__esModule:()=>i.X,default:()=>d});var s=function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("div",{class:e.$style["page-preview"]},[t("div",{class:e.$style["frame-box"],attrs:{"data-device":s.device}},[s.pageContent?t("iframe",{ref:"previewFrame",class:e.$style["page-preview-frame"],attrs:{src:s.frameLink,frameborder:"0"},on:{load:s.frameLoad}}):e._e(),s.loading?t("div",{staticClass:"flex justify-center items-center",class:e.$style["loading-mask"]},[t("img",{attrs:{src:a(13244),alt:"",srcset:""}})]):e._e()]),t("div",{staticClass:"grid",class:e.$style["tools-bar"]},[t("div",{staticClass:"flex items-center justify-center",class:e.$style["btn--go-home"],on:{click:s.closePreviewPage}},[t("i",{staticClass:"ic iconfont icon-xiangshang"})]),t("div",{class:e.$style["text-info"]},[t("span",{staticClass:"text"},[e._v(e._s(s.pageName))])]),t("div",{class:e.$style["btn--use-page"],on:{click:s.usePage}},[e._v(" 立即使用 ")])]),t("div",{staticClass:"flex items-center justify-center",class:e.$style["btn--change-device"],on:{click:s.tabDevice}},["pc"===s.device?t("i",{staticClass:"ic iconfont icon-shouji"}):e._e(),"mo"===s.device?t("i",{staticClass:"ic iconfont icon-diannao"}):e._e()])])},n=[],i=a(72068);const o=i.Z,l={"page-preview":"PagePreview_page-preview_oOucc","btn--change-device":"PagePreview_btn--change-device_vhAnH","frame-box":"PagePreview_frame-box_FJJd6","page-preview-frame":"PagePreview_page-preview-frame_dm12n","tools-bar":"PagePreview_tools-bar_uENTk","btn--go-home":"PagePreview_btn--go-home_Yf2Nf","btn--use-page":"PagePreview_btn--use-page_Blhlt","text-info":"PagePreview_text-info_v05am","loading-mask":"PagePreview_loading-mask_PJXrr"};var r=a(1001);function c(e){this["$style"]=l.locals||l}var u=(0,r.Z)(o,s,n,!1,c,null,null);const d=u.exports},83025:(e,t,a)=>{a.r(t),a.d(t,{__esModule:()=>i.X,default:()=>d});var s=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return a.pageInfo.list.length>1?t("div",{ref:"pageTab",staticClass:"flex items-center",class:e.$style["page-tabs"]},[t("span",{staticClass:"flex items-center justify-center",class:e.$style["tab-btn--prev"],attrs:{"data-disable":!a.pageInfo.prev},on:{click:function(e){return a.changePage(a.pageInfo.prev)}}},[t("i",{staticClass:"ic iconfont icon-zuojiantou"})]),t("div",{staticClass:"flex items-center",class:e.$style["tab-center"]},[e._l(a.pageInfo.list,(function(s,n){return[-1===s.index?t("span",{key:"dot"+n,staticClass:"text btn",attrs:{"data-disable":""}},[e._v("...")]):t("span",{key:n,staticClass:"text btn",attrs:{"data-select":a.pageInfo.current===s.index},on:{click:function(e){return a.changePage(s.href)}}},[e._v(e._s(s.index))])]}))],2),t("span",{staticClass:"flex items-center justify-center",class:e.$style["tab-btn--next"],attrs:{"data-disable":!a.pageInfo.next},on:{click:function(e){return a.changePage(a.pageInfo.next)}}},[t("i",{staticClass:"ic iconfont icon-youjiantou"})])]):e._e()},n=[],i=a(58356);const o=i.Z,l={"page-tabs":"PageTab_page-tabs_vz1j7","tab-btn--prev":"PageTab_tab-btn--prev_eGgM3","tab-btn--next":"PageTab_tab-btn--next_Xa6mL","tab-center":"PageTab_tab-center_G3H_p"};var r=a(1001);function c(e){this["$style"]=l.locals||l}var u=(0,r.Z)(o,s,n,!1,c,null,null);const d=u.exports},2576:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var s=a(46329),n=a(67696),i={};for(const d in n)"default"!==d&&(i[d]=()=>n[d]);a.d(t,i);var o=a(40780),l=a(1001);function r(e){this["$style"]=o.Z.locals||o.Z}var c=(0,l.Z)(n["default"],s.s,s.x,!1,r,null,null);const u=c.exports},31760:(e,t,a)=>{a.d(t,{Z:()=>s});const s={}},40780:(e,t,a)=>{a.d(t,{Z:()=>s});const s={"shop-module":"ShopModule_shop-module_TPzOW","divide-line":"ShopModule_divide-line_MfoSu","page-template-list":"ShopModule_page-template-list_qQ5gQ","loading-cover":"ShopModule_loading-cover_Uy_so","page-template":"ShopModule_page-template_VWdfm","thumb-mask":"ShopModule_thumb-mask_mMunS",thumb:"ShopModule_thumb_flHEc",btn:"ShopModule_btn_F_N5O","text-intro":"ShopModule_text-intro_lxdsr","info-box":"ShopModule_info-box_XH6b7",title:"ShopModule_title_lyy_F","category-group":"ShopModule_category-group_m95M3","condition-group":"ShopModule_condition-group_lVfAV",list:"ShopModule_list_H3pRQ",item:"ShopModule_item_dMC6c"}},33040:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var s=a(69129),n=a.n(s),i={};for(const l in s)"default"!==l&&(i[l]=()=>s[l]);a.d(t,i);const o=n()},67696:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var s=a(46979),n=a.n(s),i={};for(const l in s)"default"!==l&&(i[l]=()=>s[l]);a.d(t,i);const o=n()},46329:(e,t,a)=>{a.d(t,{s:()=>s,x:()=>n});var s=function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("div",{class:e.$style["shop-module"]},[t("div",{class:e.$style["page-template-module"]},[t("div",{staticClass:"wrapper--limit-width"},[t("div",{staticClass:"grid grid-cols-4",class:e.$style["page-template-list"]},[t("div",{class:e.$style["page-template"],on:{click:s.createEmptyPage}},[t("div",{class:e.$style["thumb"]},[t("div",{staticClass:"flex items-center justify-center",class:e.$style["text-intro"]},[e._m(0)])])]),t("div",{class:e.$style["page-template"],on:{click:s.uploadPageData}},[t("div",{class:e.$style["thumb"]},[t("div",{staticClass:"flex items-center justify-center",class:e.$style["text-intro"]},[e._m(1)])]),t("input",{ref:"uploadDataInput",staticStyle:{display:"none"},attrs:{type:"file",name:"pageData",accept:".txt, .jsmo"}})])]),t("div",{ref:"categoryLine",class:e.$style["divide-line"]}),s.categoryData?t("div",{class:e.$style["category-group"]},[t("div",{class:e.$style["category-conditions"]},[t("div",{staticClass:"flex",class:e.$style["condition-group"]},[t("div",{class:e.$style["title"]},[e._v("主题：")]),t("div",{staticClass:"flex",class:e.$style["list"]},e._l(s.categoryData.style,(function(a,n){return t("div",{key:n,class:e.$style["item"],attrs:{"data-select":s.currentStyle===a.value},on:{click:function(e){s.currentStyle=a.value}}},[e._v(" "+e._s(a.lable)+" ")])})),0)]),t("div",{staticClass:"flex",class:e.$style["condition-group"]},[t("div",{class:e.$style["title"]},[e._v("分类：")]),t("div",{staticClass:"flex",class:e.$style["list"]},e._l(s.categoryData.cat,(function(a,n){return t("div",{key:n,class:e.$style["item"],attrs:{"data-select":s.currentCat===a.value},on:{click:function(e){s.currentCat=a.value}}},[e._v(" "+e._s(a.lable)+" ")])})),0)])])]):e._e(),t("div",{staticClass:"grid grid-cols-4",class:e.$style["page-template-list"]},[e._l(s.showTempleList,(function(a){return t("div",{key:a.id,class:e.$style["page-template"],on:{click:function(e){return s.previewPage(a.id)}}},[t("div",{class:e.$style["thumb"]},[t("img",{attrs:{src:a.img,alt:""}}),t("div",{staticClass:"flex items-center justify-center",class:e.$style["thumb-mask"]},[t("div",{class:e.$style["btn"]},[t("span",{staticClass:"text"},[e._v("立即预览")])])])]),t("div",{class:e.$style["info-box"]},[t("div",{class:e.$style["title"]},[e._v(e._s(a.title))])])])})),s.listLoading?t("div",{staticClass:"flex items-center justify-center",class:e.$style["loading-cover"]},[t("img",{attrs:{src:a(13244),alt:"",srcset:""}})]):e._e()],2),s.total>1?t(s.PageTab,{attrs:{total:s.total,"page-size":s.pageSize,"current-index":s.currentPage},on:{changePage:s.changePage}}):e._e()],1)])])},n=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"flex flex-col items-center"},[t("i",{staticClass:"ic iconfont icon-wendang"}),t("span",{staticClass:"text"},[e._v("空白页面")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"flex flex-col items-center"},[t("i",{staticClass:"iconfont ic icon-shangchuan"}),t("span",{staticClass:"text"},[e._v("上传页面")])])}]},59013:(e,t,a)=>{a.r(t)},55876:(e,t,a)=>{a.r(t)},69129:function(e,t,a){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(70538),i=a(70538),o=s(a(2576)),l=s(a(13506));t["default"]=(0,n.defineComponent)({__name:"App",setup(e){const t=(0,i.ref)("");function a(){t.value=""}function s(e){t.value=e}return{__sfc:!0,previewId:t,closePreviewPage:a,setPreviewId:s,ShopModule:o.default,PagePreview:l.default}}})},72068:(e,t,a)=>{Object.defineProperty(t,"X",{value:!0});const s=a(70538),n=a(70538),i=a(37999),o=a(29231);t.Z=(0,s.defineComponent)({__name:"PagePreview",props:{id:null},emits:["closePreviewPage"],setup(e,{emit:t}){const a=e,s=(0,n.inject)("appParam"),l=(0,n.ref)(null),r=(0,n.toRef)(a,"id"),c=(0,n.ref)(""),u=(0,n.ref)("pc");function d(){l.value.contentWindow?.setPreviewPageData(c.value)}const p=(0,n.computed)((()=>"pc"===u.value?s.appPath+"preview.html":s.appPath+"preview.html?device=mo")),f=(0,n.ref)(!1);(0,n.watch)(p,(()=>{f.value=!0}));const g=(0,n.ref)("快捷编辑器");function v(){t("closePreviewPage")}function m(){u.value="pc"===u.value?"mo":"pc"}(0,n.onMounted)((()=>{f.value=!0,(0,i.getPageData)({id:r.value}).then((e=>{c.value=e.data.post.content,g.value=e.data.post.title})).finally((()=>{}))}));let _=!1;function h(){!0!==_&&!0!==f.value&&(_=!0,(0,i.getPageData)({id:r.value}).then((e=>{o.shopFrameEmitter.emit("changePageData",{type:"template",data:e.data.post.json})})).finally((()=>{_=!1})))}function y(e){e.data.data&&e.data.data.pageLoaded&&(console.log("message"),f.value=!1)}return(0,n.onMounted)((()=>{window.addEventListener("message",y)})),(0,n.onBeforeUnmount)((()=>{window.removeEventListener("message",y)})),{__sfc:!0,param:s,previewFrame:l,prop:a,id:r,pageContent:c,device:u,frameLoad:d,frameLink:p,loading:f,pageName:g,emit:t,closePreviewPage:v,tabDevice:m,waiting:_,usePage:h,winMessage:y}}})},58356:(e,t,a)=>{Object.defineProperty(t,"X",{value:!0});const s=a(70538),n=a(70538);t.Z=(0,s.defineComponent)({__name:"PageTab",props:{total:null,currentIndex:null,pageSize:null},emits:["changePage"],setup(e,{emit:t}){const a=e,s=2,i=3,o=2,l=s+i+o;function r(e,t){const a=new Array(e).fill(0).map(((e,t)=>({index:t+1,href:t+1})));if(e<=l)return a;if(t<=l-o)return[...a.slice(0,l-o),{index:-1,href:""},a[e-1]];if(t>=l&&e-t<o)return[a[0],{index:-1,href:""},...a.slice(e-l+s)];{const s=t-Math.floor(i/2);return[a[0],{index:-1,href:""},...a.slice(s,s+i),{index:-1,href:""},a[e-1]]}}const c=(0,n.computed)((()=>{const{total:e,currentIndex:t}=a,s=Math.ceil(e/a.pageSize);return{total:e,current:t,prev:1===t?"":t-1,next:t===s?"":t+1,list:r(s,t)}})),u=(0,n.ref)(null);function d(e){t("changePage",e)}return(0,n.onMounted)((()=>{})),{__sfc:!0,prop:a,leftPageCount:s,centerPageCount:i,rightPageCount:o,totalPageCount:l,getPageList:r,pageInfo:c,pageTab:u,emit:t,changePage:d}}})},46979:function(e,t,a){var s=a(26038)["gsap"],n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(70538),o=a(70538),l=a(49127),r=a(37999),c=a(29231),u=n(a(83025));t["default"]=(0,i.defineComponent)({__name:"ShopModule",emits:["previewPage"],setup(e,{emit:t}){s.registerPlugin(l.ScrollToPlugin);const a=(0,o.ref)([]),n=(0,o.ref)(1),i=(0,o.ref)(1),d=12;function p(e){i.value=e}const f=(0,o.inject)("appParam"),g="62a7754f82474",v=(0,o.computed)((()=>a.value.filter((e=>"uemo"!==f.appName||e.cat!==g)))),m=(0,o.ref)({style:[],cat:[]}),_=(0,o.ref)(""),h=(0,o.ref)(""),y=(0,o.ref)(null),P=(0,o.ref)(!1);function b(e=!1,t=1){P.value=!0,(0,r.getPagesList)({style:_.value,cat:h.value,page:t}).then((t=>{const a=t.data.list;return new Promise((t=>{if(!e)return t(a);s.to(window,{scrollTo:{y:y.value||0,offsetY:-10},onComplete(){return t(a)}})}))})).then((e=>{a.value=e.data,n.value=e.total,i.value=e.page})).finally((()=>{P.value=!1}))}function w(){c.shopFrameEmitter.emit("changePageData",{type:"empty",data:""})}(0,o.watch)(i,(e=>{b(!0,e)})),(0,o.watch)([_,h],(()=>{b(!0)})),(0,o.onMounted)((()=>{(0,r.getPageCategory)().then((e=>{m.value={style:[{value:"",lable:"全部"},...e.data.style],cat:[{value:"",lable:"全部",total:-1},...e.data.cat.filter((e=>"uemo"!==f.appName||e.value!==g))]}})),b()}));const x=(0,o.ref)(null),C=new FileReader;function M(){const e=$(x.value);e.off("change").on({change:e=>{const t=e.target.files;t&&t[0]&&C.readAsText(t[0])}}),C.onload=e=>{c.shopFrameEmitter.emit("changePageData",{type:"empty",data:e.target?.result||""})},e.trigger("click")}function S(e){t("previewPage",e)}return{__sfc:!0,templateList:a,total:n,currentPage:i,pageSize:d,changePage:p,appParam:f,uemoCat:g,showTempleList:v,categoryData:m,currentStyle:_,currentCat:h,categoryLine:y,listLoading:P,loadList:b,createEmptyPage:w,uploadDataInput:x,reader:C,uploadPageData:M,emit:t,previewPage:S,PageTab:u.default}}})},37999:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPageCategory=t.getPageData=t.getPagesList=void 0;const s=a(50686);function n(e){return s.AxiosMoue5.get("/pages/list.php",{params:e})}function i(e){return s.AxiosMoue5.get("/pages/post.php",{params:e})}function o(){return s.AxiosMoue5.get("/pages/category.php")}t.getPagesList=n,t.getPageData=i,t.getPageCategory=o},85154:(e,t,a)=>{window.DOMAIN_CONFIG=window.parent.DOMAIN_CONFIG||{DOMAIN_MAIN:"uemo.net",DOMAIN_LINE:"jsmo.xin"},window.name="PageShopWindow",a(59013),a(14734),a(74251),a(55876),a(45892);const s=a(29231);window.usePage=(e,t)=>{s.shopFrameEmitter.emit("changePageData",{type:e,data:t})}},45892:function(e,t,a){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(a(70538)),i=s(a(77286)),o=a(29231),l=new n.default({el:"#shopApp",data:()=>({param:{allowEmpty:!0,appName:"uemo",appPath:"/"}}),render:e=>e(i.default),provide(){return{appParam:this.param}},mounted(){this.$nextTick((()=>{o.shopFrameEmitter.emit("editorFrameMounted",this)}))}});window.setShopWinOption=function(e){Object.assign(l.param,e)}},29231:function(e,t,a){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.shopFrameEmitter=void 0;const n=s(a(10855)),i=(0,n.default)();i.on("editorFrameMounted",(e=>{window.parent.editorFrameMounted?.(window,e)})),i.on("changePageData",(e=>{"EditorControlWindow"===window.parent?.name&&window.parent.changePageData(e.data||"")})),t.shopFrameEmitter=i},15182:(e,t,a)=>{a.d(t,{s:()=>s,x:()=>n});var s=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{class:e.$style["shop-app"]},[a.previewId?t(a.PagePreview,{attrs:{id:a.previewId},on:{closePreviewPage:a.closePreviewPage}}):t(a.ShopModule,{on:{previewPage:a.setPreviewId}})],1)},n=[]}},t={};function a(s){var n=t[s];if(void 0!==n)return n.exports;var i=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=e,(()=>{var e=[];a.O=(t,s,n,i)=>{if(!s){var o=1/0;for(u=0;u<e.length;u++){s=e[u][0],n=e[u][1],i=e[u][2];for(var l=!0,r=0;r<s.length;r++)(!1&i||o>=i)&&Object.keys(a.O).every((e=>a.O[e](s[r])))?s.splice(r--,1):(l=!1,i<o&&(o=i));if(l){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[s,n,i]}})(),(()=>{a.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return a.d(t,{a:t}),t}})(),(()=>{a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e)})(),(()=>{a.j=523})(),(()=>{var e={523:0};a.O.j=t=>0===e[t];var t=(t,s)=>{var n,i,o=s[0],l=s[1],r=s[2],c=0;if(o.some((t=>0!==e[t]))){for(n in l)a.o(l,n)&&(a.m[n]=l[n]);if(r)var u=r(a)}for(t&&t(s);c<o.length;c++)i=o[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(u)},s=self["webpackChunkeditor_page"]=self["webpackChunkeditor_page"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var s=a.O(void 0,[998,64],(()=>a(85154)));s=a.O(s)})();